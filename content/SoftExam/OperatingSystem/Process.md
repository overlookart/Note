---
# 文章的标题
title: "进程管理"
# 文章的时间
date: 2024-03-25T20:40:02+08:00
# 文章是否为草稿状态 草稿状态不会发布到文章列表
draft: false
# 文章描述 在文章列表页展示的内容
description: "文章描述"
# 文章的过期时间  过期后不会发布到文章列表
#expiryDate:  //.ExpiryDate
# 文章的发布时间  未到达发布时间不会发布到文章列表
#publishDate: //.PublishDate
# 上次修改的日期
#lastmod: // .Lastmod
# 作者
author: "OverLookArt"
---

## 程序与进程

* 定义
  进程由程序、数据、进程控制块(PCB)组成，进程是资源分配和独立运动的基本单位。
* 特征
  动态性、并发性、共享性、独立性、结构性、制约性

* 进程与程序的区别
  1. 进程是动态的，程序是静态的。进程是程序在数据集上的一次执行
  2. 进程具有并发性，程序没有
  3. 进程是资源分配的基本单位，程序不是
  4. 进程与程序不是一一对应，一个进程通常对应一个程序，而一个程序可以对应零个或多个进程

## 状态及转换

* 三态模型：运行态、就绪态、阻塞态
  
  ``` mermaid
  flowchart TB
  a((运行态))
  b((就绪态))
  c((阻塞态))

  a-- 时间片到 -->b
  b-- 被调度 -->a
  a-- 等待事件 -->c
  c-- 等待事件发生 -->b
  ```

* 五态模型：运行态、就绪态、阻塞态、新建态和终止态
  
  ``` mermaid
  flowchart LR
  a((新建态))
  b((就绪态))
  c((阻塞态))
  d((运行态))
  e((终止态))

  a --> b
  b-- 被调度 -->d
  d-- 时间片到 -->b
  d-- 等待事件 -->c
  c-- 等待事件发生 -->b
  d --> e
  ```

## 进程的控制

* 进程控制是由操作系统内核(Kernel)中的`原语`实现的
* 原语(Primitive)是指由若干条机器指令组成，用于完成特定功能的程序段。原语的特点是在执行时不能被分割

## 进程间通信

多个并发进程存在资源共享和相互合作，因此进程之间需要进行通信

1. 同步和互斥
   * 同步式合作进程间的直接制约问题
   * 互斥是申请临界资源进程间的间接制约问题
   * 进程的同步：系统中需要相互合作、协同工作的进程之间的通信
   * 进程的互斥：系统中多个进程因争夺临界资源而互斥执行，每次只能给一个进程使用的资源称为临界资源
2. 信号量机制
   信号量机制是一种有效的进程同步和互斥的工具
   1. 公用信号量：互斥信号量，对临界资源采用互斥访问，初始值为1或资源的个数
   2. 私有信号量：同步信号量，对共享资源访问控制，初始值为0或某个正整数
   信号量 S 的物理意义：若 S >= 0,表示可用的资源数，若 S <= 0,其绝对值表示阻塞队列中等待该资源的进程数

   * PV 操作：均为原子操作，是实现同步和互斥的常用方法
   * P 操作：表示申请一个资源，即 S=S-1，若 S>=0, 则执行 P 操作的进程继续执行，若 S <= 0, 则执行 P 操作的进程进入阻塞状态
   * V 操作：表示释放一个资源，即 S=S+1，若 S>=0, 则执行 V 操作的进程继续执行, 若 S<=0, 则唤醒一个进程，并将其插入就绪队列，然后执行 V 操作的进程继续执行

* PV操作实现进程互斥
  令信号量 S 初始值为1，当进入临界区时执行 P 操作，对出临界区时执行 V 操作。
* PV操作实现进程同步
  设置3个信号量 S(互斥信号量，初始值为1)、S1(是否将产品放入缓冲区，初始值为n，缓冲区的容量)、S2(缓存区是否有产品，初始值为0)
  