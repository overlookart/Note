<!doctype html><html><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.110.0"><link rel=stylesheet href=http://example.org/scss/style.css><link rel=stylesheet href=http://example.org/style.css><body><header class="top-0 sticky"><div class="backdrop-blur transition-colors duration-500 border-slate-50/[0.06] bg-black/65"><div class=inline-block><a href=/about/><i class='fa fa-heart'></i>
<span>关于</span></a></div><div class=inline-block><a href=/menu/><span>404</span></a></div></div></header><div id=content><div class="w-full max-w-8xl"><div class=flex><aside class="fixed top-10 z-40 lg:w-40 lg:block hidden"><nav id=TableOfContents><ul><li><a href=#基本引用>基本引用</a></li><li><a href=#高级引用>高级引用</a></li></ul></nav></aside><article class="prose prose-zinc prose-lg mx-auto">模版: default single<h1 id=vue3中对dom元素引用>Vue3中对Dom元素引用</h1><h2 id=基本引用>基本引用</h2><ul><li>在 html 中设置要引用元素的 <code>ref</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-HTML data-lang=HTML><span style=display:flex><span>&lt;<span style=color:#f92672>el-form</span> <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;formRef&#34;</span>/&gt;
</span></span></code></pre></div><ul><li>在脚本中声明并使用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// 声明对表单的引用
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>formRef</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>//清除表单的验证字段
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>formRef</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>clearValidate</span>([<span style=color:#e6db74>&#39;name&#39;</span>]);
</span></span></code></pre></div><h2 id=高级引用>高级引用</h2><ul><li>在 html 中设置动态的 <code>ref</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-HTML data-lang=HTML><span style=display:flex><span>&lt;<span style=color:#f92672>el-tree</span> <span style=color:#a6e22e>:ref</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;(el) =&gt; setTreeRef(el, index)&#34;</span>/&gt;
</span></span></code></pre></div><ul><li>在脚本中声明并使用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>//声明存储引用的数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>refTrees</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span><span style=color:#75715e>// 实现动态设置 ref 的方法,并将引用存储
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>setTreeRef</span>(<span style=color:#a6e22e>el</span>, <span style=color:#a6e22e>index</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 判断 dom 元素是否有效
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>el</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 以 className 的方式为元素设置标记
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>el</span>.<span style=color:#a6e22e>className</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;ref-tree-&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>index</span>;
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 储存到引用数组中
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>refTrees</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>el</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// 使用动态引用
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>useTreeRef</span>(<span style=color:#a6e22e>index</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>refTree</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>refTrees</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>item</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 通过 className 获取dom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>className</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;ref-tree-&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>index</span>){
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>refTree</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>item</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>refTree</span>.<span style=color:#a6e22e>setCheckedKeys</span>([<span style=color:#a6e22e>checked</span>],<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></article></div></div></div></body></html>